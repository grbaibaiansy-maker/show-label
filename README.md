# 字符网格标注与对照

在固定行列的字符图上，对目标字符逐格标注（标为 False），并与从 txt 导入的真实标签同屏对照。左侧显示参考图，右侧显示标记图并完成网格对齐与标注。

## 运行方式

- 用浏览器直接打开 `index.html`，或本地起静态服务后访问：
  ```bash
  cd show_label
  python3 -m http.server 8080
  ```
  然后打开 http://localhost:8080

## 界面与流程

### 1. 双图布局

- **参考图像(左)**：选择第一张图，仅作参考，显示在左侧面板。
- **标记图像(右)**：选择第二张图，在右侧面板上进行网格对齐与逐字标注。

### 2. 网格设置

- **行数 / 列数**：定义网格行列（如 10 行 8 列）。
- **格子宽(px) / 格子高(px)**：每个格子的像素大小，默认 48；留空或填 0 则按图像尺寸等分。

### 3. 对齐标定（默认：拖动网格）

- **拖动网格**（默认）：在右侧标记图上按住鼠标拖动，整体移动网格与字符对齐。
- **拖动图像**：在标记图上拖动，移动图像与网格对齐。
- **重置对齐**：将网格偏移和图像偏移清零。
- **选择字符**：切换为逐字选择模式，用于在格子上点选/取消标注。

### 4. 逐字选择

- 在「选择字符」模式下，点击右侧图像上的格子可选中/取消。
- 选中的格子用**红色矩形框**标出（无文字标签），右侧列表显示已选 (行, 列)。
- 每个格子中心显示蓝色索引 `行,列`（如 `0,0`），便于对照。

### 5. 真实标签（txt）

- 点击「选择 txt」加载本地 txt 文件。
- **格式**：按行列的矩阵，每行对应一行（row），行内用空格或逗号分隔各列（col）；单元格为 `0`、`false` 或 `f`（不区分大小写）表示该格为真实 False 位置。
- 加载后，真实 False 位置在右侧标记图上显示为**绿色半透明填充**（无描边），与用户红框同屏对照。

示例 txt（3 行 4 列，第 0 行第 1 列、第 1 行第 2 列为 False）：

```
1 0 1 1
1 1 0 1
1 1 1 1
```

### 6. 保存

- **保存标注图像**：将右侧标记图与当前网格、红框、绿块、蓝字索引合成一张图，下载为 PNG。
- **保存标签(txt)**：将用户当前标注导出为与输入格式相同的矩阵 txt：每行一行，空格分隔；选中格为 `1`，未选为 `0`，便于与真实标签对比或后续使用。

### 7. 清空选择

- **清空选择**：清除所有用户标注并隐藏真实标签绿块，可重新选格或重新加载真实标签。

## 图例

- **红框**：用户标注（该格标为 False）
- **绿色半透明块**：真实标签中的 False 位置（从 txt 加载）
- **蓝字**：格子索引 `行,列`

## 文件说明

| 文件 | 说明 |
|------|------|
| `index.html` | 页面结构（双图、工具栏、图例、侧栏） |
| `style.css` | 样式（深色主题、布局、按钮与面板） |
| `app.js` | 逻辑：双图加载、网格与格子计算、对齐与选择、真实标签解析与绘制、保存图像与标签 txt |
